{%- comment -%}
  Newsletter Section
  Email signup form with background
{%- endcomment -%}

<section class="newsletter py-12 {% if section.settings.use_color_bg %}bg-primary bg-opacity-5{% endif %}">
  <div class="container mx-auto px-4">
    <div class="max-w-3xl mx-auto text-center">
      <h2 class="text-2xl md:text-3xl font-bold mb-3">{{ section.settings.title }}</h2>
      
      {% if section.settings.subtitle != blank %}
        <p class="text-gray-600 mb-6">{{ section.settings.subtitle }}</p>
      {% endif %}
      
      <form action="{{ routes.account_url }}" method="post" class="newsletter__form max-w-md mx-auto" target="_blank">
        <input type="hidden" name="form_type" value="customer">
        <input type="hidden" name="utf8" value="âœ“">
        <input type="hidden" name="contact[tags]" value="newsletter">
        
        <div class="flex flex-col sm:flex-row gap-3">
          <div class="newsletter__input flex-grow">
            <input
              type="email"
              name="contact[email]"
              id="newsletterEmail"
              placeholder="{{ section.settings.placeholder_text }}"
              required
              class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
              aria-label="Email address"
            >
          </div>
          
          <button
            type="submit"
            class="newsletter__button bg-primary hover:bg-primary-dark text-white font-medium px-6 py-3 rounded-lg transition-colors"
          >
            {{ section.settings.button_text }}
          </button>
        </div>
        
        {% if section.settings.show_disclaimer %}
          <p class="newsletter__disclaimer text-xs text-gray-500 mt-3">
            {{ section.settings.disclaimer_text }}
          </p>
        {% endif %}
      </form>
    </div>
  </div>
  
  {% if section.settings.show_divider %}
    <div class="container mx-auto px-4 mt-12">
      <div class="border-t border-gray-200"></div>
    </div>
  {% endif %}
</section>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Stay in the Loop"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subheading",
      "default": "Sign up for our newsletter to receive updates, exclusive offers, and more."
    },
    {
      "type": "text",
      "id": "placeholder_text",
      "label": "Input placeholder text",
      "default": "Your email address"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Subscribe"
    },
    {
      "type": "checkbox",
      "id": "use_color_bg",
      "label": "Use colored background",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_disclaimer",
      "label": "Show disclaimer text",
      "default": true
    },
    {
      "type": "textarea",
      "id": "disclaimer_text",
      "label": "Disclaimer text",
      "default": "By signing up, you agree to receive email marketing. You can unsubscribe at any time."
    },
    {
      "type": "checkbox",
      "id": "show_divider",
      "label": "Show bottom divider",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "Newsletter",
      "category": "Promotional"
    }
  ]
}
{% endschema %}
